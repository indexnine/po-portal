<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="print.css">
</head>
<body>

<div class="wrap">

<h2>PURCHASE ORDER</h2>

<div><b>PO:</b> <span id="pno"></span> |
<b>Date:</b> <span id="pdt"></span></div>

<div class="grid">
<div><b>Consignee</b><br>Indexnine Technologies Pvt. Ltd.</div>
<div><b>Supplier</b><br><span id="sup"></span></div>
</div>

<table id="ptbl">
<tr><th>#</th><th>Item</th><th>Qty</th><th>Rate</th><th>Amount</th></tr>
</table>

<div class="bottom">
<div>
<b>Terms</b><br><span id="trm"></span>
</div>

<div>
For Indexnine Technologies Pvt. Ltd.<br><br>
Authorised Signatory
</div>
</div>

<button onclick="window.print()" class="print-btn">Print / Save PDF</button>

<script>
const d=JSON.parse(localStorage.getItem("poData"));

pno.innerText=d.poNo;
pdt.innerText=d.poDate;
sup.innerText=d.supplier;
trm.innerText=d.terms;

let sub=0;

d.items.forEach((it,i)=>{
 let amt=Math.round(it.q*it.r);
 sub+=amt;

 ptbl.innerHTML+=`
 <tr>
 <td>${i+1}</td>
 <td>${it.n}</td>
 <td>${it.q}</td>
 <td>₹ ${it.r.toLocaleString("en-IN")}</td>
 <td>₹ ${amt.toLocaleString("en-IN")}</td>
 </tr>`;
});

let tax=Math.round(sub*0.18);
let html="";

if(d.taxType==="cgst"){
 let h=Math.round(tax/2);
 html+=`<tr><td colspan=4>CGST (9%)</td><td>₹ ${h.toLocaleString("en-IN")}</td></tr>`;
 html+=`<tr><td colspan=4>SGST (9%)</td><td>₹ ${h.toLocaleString("en-IN")}</td></tr>`;
}

if(d.taxType==="igst"){
 html+=`<tr><td colspan=4>IGST (18%)</td><td>₹ ${tax.toLocaleString("en-IN")}</td></tr>`;
}

ptbl.innerHTML+=`
<tr><td colspan=4>Sub Total</td><td>₹ ${sub.toLocaleString("en-IN")}</td></tr>
${html}
<tr><td colspan=4><b>Total</b></td><td><b>₹ ${(sub+tax).toLocaleString("en-IN")}</b></td></tr>`;
</script>

</div>
</body>
</html>
